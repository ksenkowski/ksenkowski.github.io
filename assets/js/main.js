!function(t){t.fn.unveil=function(e,i){function n(){var e=c.filter(function(){var e=t(this);if(!e.is(":hidden")){var i=a.scrollTop(),n=i+a.height(),o=e.offset().top,r=o+e.height();return r>=i-s&&o<=n+s}});o=e.trigger("unveil"),c=c.not(o)}var o,a=t(window),s=e||0,r=window.devicePixelRatio>1,l=r?"data-src-retina":"data-src",c=this;return this.one("unveil",function(){var t=this.getAttribute(l);t=t||this.getAttribute("data-src"),t&&(this.setAttribute("src",t),"function"==typeof i&&i.call(this))}),a.on("scroll.unveil resize.unveil lookup.unveil",n),n(),this}}(window.jQuery||window.Zepto),!function(t,e){"function"==typeof define&&define.amd?define(["jquery"],function(i){return e(t,i)}):"object"==typeof exports?e(t,require("jquery")):e(t,t.jQuery||t.Zepto)}(this,function(t,e){"use strict";function i(t){if(C&&"none"===t.css("animation-name")&&"none"===t.css("-webkit-animation-name")&&"none"===t.css("-moz-animation-name")&&"none"===t.css("-o-animation-name")&&"none"===t.css("-ms-animation-name"))return 0;var e,i,n,o,a=t.css("animation-duration")||t.css("-webkit-animation-duration")||t.css("-moz-animation-duration")||t.css("-o-animation-duration")||t.css("-ms-animation-duration")||"0s",s=t.css("animation-delay")||t.css("-webkit-animation-delay")||t.css("-moz-animation-delay")||t.css("-o-animation-delay")||t.css("-ms-animation-delay")||"0s",r=t.css("animation-iteration-count")||t.css("-webkit-animation-iteration-count")||t.css("-moz-animation-iteration-count")||t.css("-o-animation-iteration-count")||t.css("-ms-animation-iteration-count")||"1";for(a=a.split(", "),s=s.split(", "),r=r.split(", "),o=0,i=a.length,e=Number.NEGATIVE_INFINITY;i>o;o++)n=parseFloat(a[o])*parseInt(r[o],10)+parseFloat(s[o]),n>e&&(e=n);return n}function n(){if(e(document.body).height()<=e(window).height())return 0;var t,i,n=document.createElement("div"),o=document.createElement("div");return n.style.visibility="hidden",n.style.width="100px",document.body.appendChild(n),t=n.offsetWidth,n.style.overflow="scroll",o.style.width="100%",n.appendChild(o),i=o.offsetWidth,n.parentNode.removeChild(n),t-i}function o(){if(!E){var t,i,o=e("html"),a=h("is-locked");o.hasClass(a)||(i=e(document.body),t=parseInt(i.css("padding-right"),10)+n(),i.css("padding-right",t+"px"),o.addClass(a))}}function a(){if(!E){var t,i,o=e("html"),a=h("is-locked");o.hasClass(a)&&(i=e(document.body),t=parseInt(i.css("padding-right"),10)-n(),i.css("padding-right",t+"px"),o.removeClass(a))}}function s(t,e,i,n){var o=h("is",e),a=[h("is",_.CLOSING),h("is",_.OPENING),h("is",_.CLOSED),h("is",_.OPENED)].join(" ");t.$bg.removeClass(a).addClass(o),t.$overlay.removeClass(a).addClass(o),t.$wrapper.removeClass(a).addClass(o),t.$modal.removeClass(a).addClass(o),t.state=e,!i&&t.$modal.trigger({type:e,reason:n},[{reason:n}])}function r(t,n,o){var a=0,s=function(t){t.target===this&&a++},r=function(t){t.target===this&&0===--a&&(e.each(["$bg","$overlay","$wrapper","$modal"],function(t,e){o[e].off(v+" "+w)}),n())};e.each(["$bg","$overlay","$wrapper","$modal"],function(t,e){o[e].on(v,s).on(w,r)}),t(),0===i(o.$bg)&&0===i(o.$overlay)&&0===i(o.$wrapper)&&0===i(o.$modal)&&(e.each(["$bg","$overlay","$wrapper","$modal"],function(t,e){o[e].off(v+" "+w)}),n())}function l(t){t.state!==_.CLOSED&&(e.each(["$bg","$overlay","$wrapper","$modal"],function(e,i){t[i].off(v+" "+w)}),t.$bg.removeClass(t.settings.modifier),t.$overlay.removeClass(t.settings.modifier).hide(),t.$wrapper.hide(),a(),s(t,_.CLOSED,!0))}function c(t){var e,i,n,o,a={};for(t=t.replace(/\s*:\s*/g,":").replace(/\s*,\s*/g,","),e=t.split(","),o=0,i=e.length;i>o;o++)e[o]=e[o].split(":"),n=e[o][1],("string"==typeof n||n instanceof String)&&(n="true"===n||"false"!==n&&n),("string"==typeof n||n instanceof String)&&(n=isNaN(n)?n:+n),a[e[o][0]]=n;return a}function h(){for(var t=f,e=0;e<arguments.length;++e)t+="-"+arguments[e];return t}function d(){var t,i,n=location.hash.replace("#","");if(n){try{i=e("[data-"+g+'-id="'+n+'"]')}catch(t){}i&&i.length&&(t=e[g].lookup[i.data(g)],t&&t.settings.hashTracking&&t.open())}else m&&m.state===_.OPENED&&m.settings.hashTracking&&m.close()}function u(t,i){var n=e(document.body),o=this;o.settings=e.extend({},y,i),o.index=e[g].lookup.push(o)-1,o.state=_.CLOSED,o.$overlay=e("."+h("overlay")),o.$overlay.length||(o.$overlay=e("<div>").addClass(h("overlay")+" "+h("is",_.CLOSED)).hide(),n.append(o.$overlay)),o.$bg=e("."+h("bg")).addClass(h("is",_.CLOSED)),o.$modal=t.addClass(f+" "+h("is-initialized")+" "+o.settings.modifier+" "+h("is",_.CLOSED)).attr("tabindex","-1"),o.$wrapper=e("<div>").addClass(h("wrapper")+" "+o.settings.modifier+" "+h("is",_.CLOSED)).hide().append(o.$modal),n.append(o.$wrapper),o.$wrapper.on("click."+f,"[data-"+g+'-action="close"]',function(t){t.preventDefault(),o.close()}),o.$wrapper.on("click."+f,"[data-"+g+'-action="cancel"]',function(t){t.preventDefault(),o.$modal.trigger(b.CANCELLATION),o.settings.closeOnCancel&&o.close(b.CANCELLATION)}),o.$wrapper.on("click."+f,"[data-"+g+'-action="confirm"]',function(t){t.preventDefault(),o.$modal.trigger(b.CONFIRMATION),o.settings.closeOnConfirm&&o.close(b.CONFIRMATION)}),o.$wrapper.on("click."+f,function(t){var i=e(t.target);i.hasClass(h("wrapper"))&&o.settings.closeOnOutsideClick&&o.close()})}var m,p,g="remodal",f=t.REMODAL_GLOBALS&&t.REMODAL_GLOBALS.NAMESPACE||g,v=e.map(["animationstart","webkitAnimationStart","MSAnimationStart","oAnimationStart"],function(t){return t+"."+f}).join(" "),w=e.map(["animationend","webkitAnimationEnd","MSAnimationEnd","oAnimationEnd"],function(t){return t+"."+f}).join(" "),y=e.extend({hashTracking:!0,closeOnConfirm:!0,closeOnCancel:!0,closeOnEscape:!0,closeOnOutsideClick:!0,modifier:""},t.REMODAL_GLOBALS&&t.REMODAL_GLOBALS.DEFAULTS),_={CLOSING:"closing",CLOSED:"closed",OPENING:"opening",OPENED:"opened"},b={CONFIRMATION:"confirmation",CANCELLATION:"cancellation"},C=function(){var t=document.createElement("div").style;return void 0!==t.animationName||void 0!==t.WebkitAnimationName||void 0!==t.MozAnimationName||void 0!==t.msAnimationName||void 0!==t.OAnimationName}(),E=/iPad|iPhone|iPod/.test(navigator.platform);u.prototype.open=function(){var t,i=this;i.state!==_.OPENING&&i.state!==_.CLOSING&&(t=i.$modal.attr("data-"+g+"-id"),t&&i.settings.hashTracking&&(p=e(window).scrollTop(),location.hash=t),m&&m!==i&&l(m),m=i,o(),i.$bg.addClass(i.settings.modifier),i.$overlay.addClass(i.settings.modifier).show(),i.$wrapper.show().scrollTop(0),i.$modal.focus(),r(function(){s(i,_.OPENING)},function(){s(i,_.OPENED)},i))},u.prototype.close=function(t){var i=this;i.state!==_.OPENING&&i.state!==_.CLOSING&&(i.settings.hashTracking&&i.$modal.attr("data-"+g+"-id")===location.hash.substr(1)&&(location.hash="",e(window).scrollTop(p)),r(function(){s(i,_.CLOSING,!1,t)},function(){i.$bg.removeClass(i.settings.modifier),i.$overlay.removeClass(i.settings.modifier).hide(),i.$wrapper.hide(),a(),s(i,_.CLOSED,!1,t)},i))},u.prototype.getState=function(){return this.state},u.prototype.destroy=function(){var t,i=e[g].lookup;l(this),this.$wrapper.remove(),delete i[this.index],t=e.grep(i,function(t){return!!t}).length,0===t&&(this.$overlay.remove(),this.$bg.removeClass(h("is",_.CLOSING)+" "+h("is",_.OPENING)+" "+h("is",_.CLOSED)+" "+h("is",_.OPENED)))},e[g]={lookup:[]},e.fn[g]=function(t){var i,n;return this.each(function(o,a){n=e(a),null==n.data(g)?(i=new u(n,t),n.data(g,i.index),i.settings.hashTracking&&n.attr("data-"+g+"-id")===location.hash.substr(1)&&i.open()):i=e[g].lookup[n.data(g)]}),i},e(document).ready(function(){e(document).on("click","[data-"+g+"-target]",function(t){t.preventDefault();var i=t.currentTarget,n=i.getAttribute("data-"+g+"-target"),o=e("[data-"+g+'-id="'+n+'"]');e[g].lookup[o.data(g)].open()}),e(document).find("."+f).each(function(t,i){var n=e(i),o=n.data(g+"-options");o?("string"==typeof o||o instanceof String)&&(o=c(o)):o={},n[g](o)}),e(document).on("keydown."+f,function(t){m&&m.settings.closeOnEscape&&m.state===_.OPENED&&27===t.keyCode&&m.close()}),e(window).on("hashchange."+f,d)})}),+function(t){"use strict";function e(){var t=document.createElement("bootstrap"),e={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(var i in e)if(void 0!==t.style[i])return{end:e[i]};return!1}t.fn.emulateTransitionEnd=function(e){var i=!1,n=this;t(this).one("bsTransitionEnd",function(){i=!0});var o=function(){i||t(n).trigger(t.support.transition.end)};return setTimeout(o,e),this},t(function(){t.support.transition=e(),t.support.transition&&(t.event.special.bsTransitionEnd={bindType:t.support.transition.end,delegateType:t.support.transition.end,handle:function(e){if(t(e.target).is(this))return e.handleObj.handler.apply(this,arguments)}})})}(jQuery),+function(t){"use strict";function e(){this._activeZoom=this._initialScrollPosition=this._initialTouchPosition=this._touchMoveListener=null,this._$document=t(document),this._$window=t(window),this._$body=t(document.body),this._boundClick=t.proxy(this._clickHandler,this)}function i(e){this._fullHeight=this._fullWidth=this._overlay=this._targetImageWrap=null,this._targetImage=e,this._$body=t(document.body)}e.prototype.listen=function(){this._$body.on("click",'[data-action="zoom"]',t.proxy(this._zoom,this))},e.prototype._zoom=function(e){var n=e.target;if(n&&"IMG"==n.tagName&&!this._$body.hasClass("zoom-overlay-open"))return e.metaKey||e.ctrlKey?window.open(e.target.getAttribute("data-original")||e.target.src,"_blank"):void(n.width>=t(window).width()-i.OFFSET||(this._activeZoomClose(!0),this._activeZoom=new i(n),this._activeZoom.zoomImage(),this._$window.on("scroll.zoom",t.proxy(this._scrollHandler,this)),this._$document.on("keyup.zoom",t.proxy(this._keyHandler,this)),this._$document.on("touchstart.zoom",t.proxy(this._touchStart,this)),document.addEventListener?document.addEventListener("click",this._boundClick,!0):document.attachEvent("onclick",this._boundClick,!0),"bubbles"in e?e.bubbles&&e.stopPropagation():e.cancelBubble=!0))},e.prototype._activeZoomClose=function(t){this._activeZoom&&(t?this._activeZoom.dispose():this._activeZoom.close(),this._$window.off(".zoom"),this._$document.off(".zoom"),document.removeEventListener("click",this._boundClick,!0),this._activeZoom=null)},e.prototype._scrollHandler=function(e){null===this._initialScrollPosition&&(this._initialScrollPosition=t(window).scrollTop());var i=this._initialScrollPosition-t(window).scrollTop();Math.abs(i)>=40&&this._activeZoomClose()},e.prototype._keyHandler=function(t){27==t.keyCode&&this._activeZoomClose()},e.prototype._clickHandler=function(t){t.preventDefault?t.preventDefault():event.returnValue=!1,"bubbles"in t?t.bubbles&&t.stopPropagation():t.cancelBubble=!0,this._activeZoomClose()},e.prototype._touchStart=function(e){this._initialTouchPosition=e.touches[0].pageY,t(e.target).on("touchmove.zoom",t.proxy(this._touchMove,this))},e.prototype._touchMove=function(e){Math.abs(e.touches[0].pageY-this._initialTouchPosition)>10&&(this._activeZoomClose(),t(e.target).off("touchmove.zoom"))},i.OFFSET=80,i._MAX_WIDTH=2560,i._MAX_HEIGHT=4096,i.prototype.zoomImage=function(){var e=document.createElement("img");e.onload=t.proxy(function(){this._fullHeight=Number(e.height),this._fullWidth=Number(e.width),this._zoomOriginal()},this),e.src=this._targetImage.src},i.prototype._zoomOriginal=function(){this._targetImageWrap=document.createElement("div"),this._targetImageWrap.className="zoom-img-wrap",this._targetImage.parentNode.insertBefore(this._targetImageWrap,this._targetImage),this._targetImageWrap.appendChild(this._targetImage),t(this._targetImage).addClass("zoom-img").attr("data-action","zoom-out"),this._overlay=document.createElement("div"),this._overlay.className="zoom-overlay",document.body.appendChild(this._overlay),this._calculateZoom(),this._triggerAnimation()},i.prototype._calculateZoom=function(){this._targetImage.offsetWidth;var e=this._fullWidth,n=this._fullHeight,o=(t(window).scrollTop(),e/this._targetImage.width),a=t(window).height()-i.OFFSET,s=t(window).width()-i.OFFSET,r=e/n,l=s/a;e<s&&n<a?this._imgScaleFactor=o:r<l?this._imgScaleFactor=a/n*o:this._imgScaleFactor=s/e*o},i.prototype._triggerAnimation=function(){this._targetImage.offsetWidth;var e=t(this._targetImage).offset(),i=t(window).scrollTop(),n=i+t(window).height()/2,o=t(window).width()/2,a=e.top+this._targetImage.height/2,s=e.left+this._targetImage.width/2;this._translateY=n-a,this._translateX=o-s;var r="scale("+this._imgScaleFactor+")",l="translate("+this._translateX+"px, "+this._translateY+"px)";t.support.transition&&(l+=" translateZ(0)"),t(this._targetImage).css({"-webkit-transform":r,"-ms-transform":r,transform:r}),t(this._targetImageWrap).css({"-webkit-transform":l,"-ms-transform":l,transform:l}),this._$body.addClass("zoom-overlay-open")},i.prototype.close=function(){return this._$body.removeClass("zoom-overlay-open").addClass("zoom-overlay-transitioning"),t(this._targetImage).css({"-webkit-transform":"","-ms-transform":"",transform:""}),t(this._targetImageWrap).css({"-webkit-transform":"","-ms-transform":"",transform:""}),t.support.transition?void t(this._targetImage).one(t.support.transition.end,t.proxy(this.dispose,this)).emulateTransitionEnd(300):this.dispose()},i.prototype.dispose=function(){this._targetImageWrap&&this._targetImageWrap.parentNode&&(t(this._targetImage).removeClass("zoom-img").attr("data-action","zoom"),this._targetImageWrap.parentNode.replaceChild(this._targetImage,this._targetImageWrap),this._overlay.parentNode.removeChild(this._overlay),this._$body.removeClass("zoom-overlay-transitioning"))},t(function(){(new e).listen()})}(jQuery),"function"!=typeof Object.create&&(Object.create=function(t){function e(){}return e.prototype=t,new e}),function(t,e,i){"use strict";function n(){t.util.init()}var o,a,s,r,l,c,h,d,u,m=0,p=0,g=0,f=[],v=[],w=[],y=(window.location.host,window.location.pathname,window.location.search,e(".archive-article")),_=1,b=6,C=e(".next"),E=e(".prev"),u=e(".pagination"),$=e(".counter"),k=e(".counter-total"),I=(e(".page-nav"),"/posts.json");e(document).ready(function(){n()}),e(window).on("load",function(){t.pagination.init()}),t.util={init:function(){t.progress.checkProgress(),e(".throw-stones").on("change","select",function(){a=e(this).val(),t.runes.throw(a)}),e("img").unveil(400,function(){e(this).load(function(){this.style.opacity=1})}),e("main").on("click",".toggle-font",function(i){i.preventDefault(),s=e(this).attr("data-font"),l=e(this).attr("data-target"),t.util.toggleFont(s,l)}),t.util.sitemap()},isEmpty:function(t){return!e.trim(t.html())},toggleFont:function(t,i){e(i).toggleClass(t)},shuffle:function(t){for(c=t.length,d;0!==c;)d=Math.floor(Math.random()*c),c-=1,h=t[c],t[c]=t[d],t[d]=h;return t},sitemap:function(){e.ajax({url:I,data:s}).done(function(t){r=t.sitemap.posts,e.each(r,function(t,e){"articles"==e.category?w+='<li><h5><a href="'+e.href+'">'+e.title+"</a></h5><small>"+e.excerpt+"</small></li>":"games"==e.category?v+='<li><h5><a href="'+e.href+'">'+e.title+"</a></h5><small>"+e.excerpt+"</small></li>":"musings"==e.category&&(f+='<li><h5><a href="'+e.href+'">'+e.title+"</a></h5><small>"+e.excerpt+"</small></li>")}),e("#articles").append(w),e("#games").append(v),e("#musings").append(f)}).fail(function(t){console.log(t)})}},t.pagination={init:function(){t.pagination.changePage(1),e(".page-nav").on("click",".next",function(e){e.preventDefault(),t.pagination.nextPage()}),e(".page-nav").on("click",".prev",function(e){e.preventDefault(),t.pagination.prevPage()}),k.html(t.pagination.numberPages())},prevPage:function(){_>1&&(_--,t.pagination.changePage(_))},nextPage:function(){_<t.pagination.numberPages()&&(_++,t.pagination.changePage(_))},changePage:function(e){e<1&&(e=1),e>t.pagination.numberPages()&&(e=t.pagination.numberPages()),u.html(" ");for(var i=(e-1)*b;i<e*b;i++)u.append(y[i]);$.html(e),1===e?E.hide():E.show(),e===t.pagination.numberPages()?C.hide():C.show()},numberPages:function(){return Math.ceil(y.length/b)}},t.gallery={getHeight:function(){return e(document).height()-e("#masthead").height()-e("#site-footer").height()},getTotalWidth:function(){var t=0;return e(".artwork img").each(function(i){t+=parseInt(e(this).width(),10),i++}),p*=5,t+(p+75)},getIndividualWidth:function(){var t=0;e(".artwork").each(function(i){t=parseInt(e(this).children("img").width(),10),e(this).width(t)})},changeSize:function(){e(".artwork, .image-container").css({height:t.gallery.getHeight(),width:"auto"}),t.gallery.getIndividualWidth(),e(".image-container .wrapper").css({height:"auto",width:t.gallery.getTotalWidth()}),e(window).resize(function(){console.log("resize"),e(".artwork, .image-container").css({height:t.gallery.getHeight(),width:"auto"}),t.gallery.getIndividualWidth(),e(".image-container .wrapper").css({height:"auto",width:t.gallery.getTotalWidth()})})}},t.progress={getMax:function(){return e(document).height()-e(window).height()},getValue:function(){return e(window).scrollTop()},checkProgress:function(){var i=e("progress");i.attr({max:t.progress.getMax()}),e(document).on("scroll",function(){i.attr({value:t.progress.getValue()})}),e(window).resize(function(){i.attr({max:t.progress.getMax(),value:t.progress.getValue()})})}},t.runes={throw:function(i){for(o=e(".rune-stone-results"),o.empty(),f=["F","U","W","A","R","K","X","V","H","N","I","J","Y","P","Z","S","T","B","E","M","L","Q","O","D","The Black Stone"],f=t.util.shuffle(f),i=parseInt(i),f=f.slice(0,i),p=0;p<f.length;p++)r=Math.floor(2*Math.random(2)),1==r?("The Black Stone"==f[p]?o.append('<li class="blackstone"></li>'):o.append('<li class="futhark"><span>'+f[p]+"</span></li>"),m+=1):(g+=1,"The Black Stone"==f[p]?o.append('<li class="blackstone"></li>'):o.append('<li class="tails futhark"><span>'+f[p]+"</span></li>"))}}}(window.shadows=window.shadows||{},jQuery);